<!DOCTYPE html>

<html>
    <body>
        <p>Date formatter (current version)</p>
        <input id="current" placeholder="jj/mm/aaaa">

        <p>Date formatter (fix)</p>
        <input id="fix" placeholder="jj/mm/aaaa">
    </body>
</html>

<script>
    var currentInput = document.getElementById('current');
    currentInput.oninput = function (evt) {
        evt.target.value = formatDate(evt.target.value);
    }

    var fixInput = document.getElementById('fix');
    fixInput.oninput = function (evt) {
        window.setTimeout(() => {
            evt.target.value = formatDate(evt.target.value);
        }, 1)
    }

    var addSlashRegExp = /^[0-3][0-9](\/[0-1][0-9])?$/;

    function formatDate(value) {
        value = value.replace(/[^\d/]/g, '');

        if (addSlashRegExp.test(value)) {
            value += '/';
        }
        return value;
    }
</script>
